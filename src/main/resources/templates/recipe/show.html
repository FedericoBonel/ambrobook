<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Recipe</title>
    <link rel="stylesheet" href="/css/index.css">
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet"
          th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css}">

    <script
            crossorigin="anonymous"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            src="https://code.jquery.com/jquery-3.6.0.min.js" th:src="@{/webjars/jquery/3.6.0/jquery.min.js}"></script>

    <script crossorigin="anonymous"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.min.js}"></script>
</head>
<body>


<nav th:replace="fragments/navbar :: navbar"></nav>

<div class="container">
    <div class="row">
        <div class="col-12 col-lg-9 mx-auto">
            <!-- Recipe name -->
            <h1 class="card-title mb-4" th:text="${recipe.description}">Recipe name heading</h1>
            <div class="row justify-content-lg-end mx-auto" sec:authorize="hasRole('ADMIN')">
                <a class="btn btn-primary mb-4 col-lg-2" th:href="@{'/recipe/' + ${recipe.id} + '/image'}"
                   type="submit">
                    Upload Image</a>
            </div>
            <!-- Image -->
            <img class="card-img-top recipe-page-img rounded-bottom"
                 src="/static/images/placeholder-image.jpeg"
                 th:if="${not #lists.isEmpty(recipe.image)}"
                 th:src="@{'/recipe/' + ${recipe.id} + '/image/render'}">
            <div class="card-body">
                <div class="row mt-2">
                    <!-- Categories -->
                    <div class="col-lg-3">
                        <h5 th:text="#{recipe.categories}">Categories:</h5>
                    </div>
                    <div class="col-lg-9">
                        <ul>
                            <li th:each="category : ${recipe.categories}" th:text="${category.name}">
                                Category
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- Prep time and difficulty -->
                <div class="row mt-2">
                    <div class="col-lg-3">
                        <h5 th:text="#{recipe.prepTime}">Preparation time:</h5>
                    </div>
                    <div class="col-lg-3">
                        <p th:text="${recipe.prepTime + ' minutes'}">30 minutes</p>
                    </div>
                    <div class="col-lg-3">
                        <h5 th:text="#{recipe.difficulty}">Difficulty:</h5>
                    </div>
                    <div class="col-lg-3">
                        <p th:text="${recipe.difficulty.name().substring(0, 1) + recipe.difficulty.name().substring(1).toLowerCase()}"></p>
                    </div>
                </div>
                <!-- Cooktime and servings -->
                <div class="row mt-2">
                    <div class="col-lg-3">
                        <h5 th:text="#{recipe.cookTime}">Cook time:</h5>
                    </div>
                    <div class="col-lg-3">
                        <p th:text="${recipe.cookTime + ' minutes'}">30 minutes</p>
                    </div>
                    <div class="col-lg-3">
                        <h5 th:text="#{recipe.servings}">Servings:</h5>
                    </div>
                    <div class="col-lg-3">
                        <p th:text="${recipe.servings}">4</p>
                    </div>
                </div>
                <!-- Source -->
                <div class="row mt-2">
                    <div class="col-lg-3">
                        <h5 th:text="#{recipe.sources}">Source:</h5>
                    </div>
                    <div class="col-lg-3">
                        <p th:text="${recipe.source}">example</p>
                    </div>
                    <div class="col-lg-3">
                        <h5 th:text="#{recipe.url}">URL:</h5>
                    </div>
                    <div class="col-lg-3">
                        <a class="text-decoration-none" th:href="@{${recipe.url}}" th:text="${recipe.url}">https://www
                            .example.com/</a>
                    </div>
                </div>
            </div>
            <hr class="bg-dark border-2 border-top border-dark">
            <!-- Ingredients -->
            <div class="row">
                <div class="col-lg-11">
                    <h2 class="card-title" th:text="#{recipe.ingredients}">Ingredients</h2>
                </div>
                <div class="col-lg-1" sec:authorize="hasRole('ADMIN')">
                    <a class="btn btn-primary" th:href="@{'/recipe/'+ ${recipe.id} +'/ingredient'}" th:text="#{edit}"
                       type="submit">Edit
                    </a>
                </div>
            </div>
            <div class="card-body">
                <div class="row mt-2">
                    <div class="col-lg-12">
                        <ul>
                            <li th:each="ingredient : ${recipe.ingredients}"
                                th:text="${ingredient.amount + ' ' + ingredient.uom.unit + ' - ' + ingredient.description}">
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <hr class="bg-dark border-2 border-top border-dark">
            <h2 class="card-title" th:text="#{recipe.directions}">Directions</h2>
            <div class="card-body">
                <div class="row mt-2">
                    <div class="col-lg-12">
                        <p class="maintain-whitespaces" th:text="${recipe.directions}"></p>
                    </div>
                </div>
            </div>
            <hr class="bg-dark border-2 border-top border-dark">
            <h2 class="card-title" th:text="#{recipe.notes}">Notes</h2>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-12">
                        <p class="maintain-whitespaces" th:text="${recipe.note.recipeNotes}"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:insert="fragments/footer :: footer"></div>
</body>
</html>